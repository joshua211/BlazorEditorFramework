@page "/"
@using BlazorEditorFramework.Core.Editor
@using BlazorEditorFramework.Core.Editor.Extensions.BaseTypes
@using BlazorEditorFramework.Core.Editor.Render
@using BlazorEditorFramework.Core.StateFactory.Abstractions
@using BlazorEditorFramework.Example.Decorations
@using BlazorEditorFramework.Example.Parsing

<PageTitle>Home</PageTitle>

@if (state is not null)
{
    <EditorView EditorState="state"></EditorView>
}

@code
{
    private EditorState? state;

    [Inject] IEditorStateFactory StateFactory { get; set; } = default!;

    protected override void OnInitialized()
    {
        var doc = "Hello World!";

        state = StateFactory.Build(doc);
        state.AddExtension(new ExampleLanguageExtension(new ExampleParser()));
        state.AddExtension(new ClassMappingExtension("even", "word-even"));
        state.AddExtension(new ClassMappingExtension("odd", "word-odd"));
        state.AddExtension(new TooltipDecoration());
    }
}